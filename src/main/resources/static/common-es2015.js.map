{"version":3,"sources":["./src/app/pages/xml-viewer/xml-viewer.service.ts","./src/app/pages/user-settings/user-settings.service.ts"],"names":[],"mappings":"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","file":"common-es2015.js","sourcesContent":["import { HttpClient, HttpResponse } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { map, switchMap, take } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { saveAs } from 'file-saver';\r\nimport { DocData } from 'src/app/data/doc-data';\r\nimport { DocResponse } from 'src/app/data/doc-response';\r\nimport swal from 'sweetalert';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class XmlViewerService {\r\n\r\n  private readonly $documentList = new BehaviorSubject<Array<DocData>>([]);\r\n\r\n  constructor(\r\n    private readonly  httpClient: HttpClient\r\n  ) { }\r\n\r\n  getDocuments () {\r\n    return this.httpClient.get<DocResponse>(`${environment.baseApi}/files`).pipe(map((response) => {\r\n      this.$documentList.next(response.reportData);\r\n    }));\r\n  }\r\n\r\n\r\n  saveDocument(id: number, filename: string = 'myfile'): void{\r\n    this.documentList.pipe(take(1)).subscribe((docList) => {\r\n      const doc = docList.find((_doc) => _doc.id === id);\r\n      this.httpClient.get(`${environment.baseApi}/download/excel/${id}`, { responseType: 'blob' as 'json' , observe: 'response'})\r\n      .pipe(take(1)).subscribe((response: HttpResponse<Blob>) => {\r\n          let dataType = response.type;\r\n          let binaryData = [];\r\n          binaryData.push(response.body);\r\n          let downloadLink = document.createElement('a');\r\n          downloadLink.href = window.URL.createObjectURL(new Blob(binaryData, {type: 'blob'}));\r\n          downloadLink.setAttribute('download', `${doc.file_name}.xlsx`);\r\n          document.body.appendChild(downloadLink);\r\n          downloadLink.click();\r\n          downloadLink.parentNode.removeChild(downloadLink);\r\n        }, err => {\r\n          let errorMessage = 'An unknown Error occurred';\r\n          if (err.status === 0) {\r\n          errorMessage = 'An unknown Error occurred';\r\n        } else if (err.status === 400) {\r\n          const serverMessage = err.error;\r\n          errorMessage = `${serverMessage.message}\\n${serverMessage?.details}` ;\r\n        } else {\r\n          const serverMessage = err.error;\r\n          if (serverMessage?.message instanceof Array) {\r\n            errorMessage = serverMessage.message.join('<br>');\r\n          } else {\r\n            errorMessage = serverMessage?.message || errorMessage;\r\n          }\r\n        }\r\n          swal({\r\n          title: 'Error',\r\n          text: errorMessage,\r\n          icon: 'error'\r\n        });\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  deleteDocument(id: number){\r\n    return this.httpClient.delete(`${environment.baseApi}/deletefile/${id}`).pipe(take(1), switchMap((dataList => {\r\n      return this.documentList;\r\n    })), take(1), map(docList => {\r\n      const listIndex = docList.findIndex(doc => doc.id === id);\r\n      docList.splice(listIndex, 1);\r\n      this.$documentList.next(docList);\r\n    }));\r\n  }\r\n\r\n  get documentList () {\r\n    return this.$documentList.asObservable();\r\n  }\r\n}\r\n","import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { BehaviorSubject } from 'rxjs';\r\nimport { map } from 'rxjs/operators';\r\nimport { environment } from 'src/environments/environment';\r\nimport { saveAs } from 'file-saver';\r\nimport { DocData } from 'src/app/data/doc-data';\r\nimport { DocResponse } from 'src/app/data/doc-response';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class UserSettingsService {\r\n\r\n  constructor(\r\n    private readonly  httpClient: HttpClient\r\n  ) { }\r\n\r\n  updatePassword (body) {\r\n    return this.httpClient.put(`${environment.baseApi}/user`, body).pipe(map((response) => {\r\n\r\n    }));\r\n  }\r\n\r\n  createUser (body) {\r\n    return this.httpClient.post(`${environment.baseApi}/users`, body).pipe(map((response) => {\r\n\r\n    }));\r\n  }\r\n\r\n}\r\n"],"sourceRoot":"webpack:///"}