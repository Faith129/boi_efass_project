{"version":3,"sources":["./src/app/common/input-validator.validator.ts","./src/app/pages/user-settings/update-password/update-password.component.ts","./src/app/pages/user-settings/update-password/update-password.component.html","./src/app/pages/user-settings/update-password/update-password.module.ts"],"names":[],"mappings":"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","file":"update-password-update-password-module-es2015.js","sourcesContent":["import { ValidatorFn, AbstractControl } from '@angular/forms';\r\n\r\nexport class CustomValidator {\r\n\r\n    static comparePassword(verifyControl: string, controlName = 'password'): ValidatorFn  {\r\n        return (control: AbstractControl): {[key: string]: boolean} | null => {\r\n            control.setErrors({passwordNoMatch: true });\r\n            const compare = control.get(controlName).value === control.get(verifyControl).value;\r\n            return compare ? null : {passwordNoMatch: true };\r\n        };\r\n    }\r\n}\r\n","import { Component, OnDestroy, OnInit } from '@angular/core';\r\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Subscription } from 'rxjs';\r\nimport { AuthService } from 'src/app/common/auth.service';\r\nimport { CustomValidator } from 'src/app/common/input-validator.validator';\r\nimport { ValidationError } from 'src/app/data/validation-error';\r\nimport swal from 'sweetalert';\r\nimport { UserSettingsService } from '../user-settings.service';\r\n\r\n@Component({\r\n  selector: 'app-update-password',\r\n  templateUrl: './update-password.component.html',\r\n  styleUrls: ['./update-password.component.css']\r\n})\r\nexport class UpdatePasswordComponent implements OnInit, OnDestroy {\r\n\r\n  username: string;\r\n  $user: Subscription;\r\n  timeIntervalId: any;\r\n  nowDate: Date;\r\n  updatePasswordForm: FormGroup;\r\n  isLoading = false;\r\n\r\n  constructor(\r\n    private authService: AuthService,\r\n    private userSettingsService: UserSettingsService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    this.updatePasswordForm = new FormGroup({\r\n      password: new FormControl(null, [Validators.required, Validators.minLength(6)]),\r\n      newPassword: new FormControl(null, [Validators.required, Validators.minLength(6)]),\r\n      confirmNewPassword: new FormControl(null, [Validators.required, Validators.minLength(6)]),\r\n    }, {validators: [CustomValidator.comparePassword('confirmNewPassword', 'newPassword')]});\r\n\r\n    this.timeIntervalId = setInterval(() => {\r\n      this.nowDate = new Date();\r\n    }, 1000);\r\n\r\n    this.$user = this.authService.user.subscribe(user => {\r\n      this.username = user?.username;\r\n    });\r\n  }\r\n\r\n  changePassword() {\r\n    if (this.updatePasswordForm.valid) {\r\n      const body = {\r\n        username: this.username,\r\n        old_password: this.password.value,\r\n        password: this.newPassword.value,\r\n        confirm_password: this.confirmNewPassword.value\r\n      };\r\n\r\n      this.isLoading = true;\r\n      this.userSettingsService.updatePassword(body).subscribe((response) => {\r\n        this.isLoading = false;\r\n        this.updatePasswordForm.reset();\r\n        swal({\r\n          title: 'Successful',\r\n          text: 'Password updated',\r\n          icon: 'success'\r\n        });\r\n      }, (err) => {\r\n        this.isLoading = false;\r\n        this.updatePasswordForm.reset();\r\n        let errorMessage = 'An unknown Error occurred';\r\n        if (err.status === 0) {\r\n          errorMessage = 'An unknown Error occurred';\r\n        } else if (err.status === 400) {\r\n          const serverMessage = err.error as ValidationError;\r\n          errorMessage = `${serverMessage.message}\\n${serverMessage?.details}` ;\r\n        } else {\r\n          const serverMessage = err.error;\r\n          if (serverMessage?.message instanceof Array) {\r\n            errorMessage = serverMessage.message.join('<br>');\r\n          } else {\r\n            errorMessage = serverMessage?.message || errorMessage;\r\n          }\r\n        }\r\n        swal({\r\n          title: 'Error',\r\n          text: errorMessage,\r\n          icon: 'error'\r\n        });\r\n      });\r\n    }\r\n  }\r\n\r\n  get password() {\r\n    return this.updatePasswordForm.get('password');\r\n  }\r\n\r\n  get newPassword() {\r\n    return this.updatePasswordForm.get('newPassword');\r\n  }\r\n\r\n  get confirmNewPassword() {\r\n    return this.updatePasswordForm.get('confirmNewPassword');\r\n  }\r\n\r\n  ngOnDestroy(): void {\r\n    clearInterval(this.timeIntervalId);\r\n\r\n    if (this.$user) {\r\n      this.$user.unsubscribe();\r\n    }\r\n  }\r\n\r\n}\r\n","<div class=\"page-header\" style=\"padding: 20px 20px;\">\r\n    <h1>\r\n      Settings <small>Update &amp; password </small>\r\n    </h1>\r\n  </div>\r\n\r\n  <div class=\"container\">\r\n\r\n  <div class=\"panel panel-default\">\r\n    <div class=\"panel-heading\">\r\n    <i class=\"fa fa-external-link-square\"></i>Profile\r\n    \r\n    </div>\r\n    <div class=\"panel-body\">\r\n    <div class=\"col-sm-9\">\r\n    <b style=\"color: gray; font-size: 15px;\">\r\n    USERNAME: </b> <b style=\"color: gray; font-size: 15px;\">{{username | titlecase}}</b>\r\n    \r\n    <div class=\"form-group\">\r\n    <b style=\"color: gray; font-size: 15px;\">\r\n    DATE: </b> <b>{{nowDate | date:'medium'}}</b>\r\n    </div>\r\n    </div>\r\n    <br>\r\n    \r\n    <!-- end: PAGE TITLE & BREADCRUMB -->\r\n    </div>\r\n    </div>\r\n\r\n          \r\n  </div>\r\n\r\n  \r\n<div class=\"container\">\r\n    <div class=\"row\">\r\n        <div class=\"col-12 col-sm-6\">\r\n        <!-- start: TEXT FIELDS PANEL -->\r\n        <div class=\"panel panel-default\">\r\n        <div class=\"panel-heading\">\r\n        <i class=\"fa fa-external-link-square\"></i>Password Informatiom\r\n        \r\n        </div>\r\n        <div class=\"panel-body\">\r\n        \r\n        <form role=\"form\" class=\"form-horizontal\" [formGroup]=\"updatePasswordForm\" (ngSubmit)=\"changePassword()\">\r\n        \r\n        \r\n        <div class=\"form-group\">\r\n        <label class=\"col-sm-2 control-label\" for=\"form-field-2\">\r\n        Current Password </label>\r\n        <div class=\"col-sm-9\">\r\n            <input type=\"password\" placeholder=\"Password\" id=\"password\" class=\"form-control\"\r\n                formControlName=\"password\" autocomplete=\"new-password\"\r\n            >\r\n            <span class=\"error\" *ngIf=\"password.touched && password.hasError('required')\"> Password required</span>\r\n            <span class=\"error\" *ngIf=\"password.touched && password.hasError('minlength')\"> Enter minimum of 6 characters</span>\r\n        </div>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n        <label class=\"col-sm-2 control-label\" for=\"form-field-2\">\r\n        New Password </label>\r\n        <div class=\"col-sm-9\">\r\n            <input type=\"password\" placeholder=\"New Password\" id=\"newPassword\" class=\"form-control\" autocomplete=\"new-password\" formControlName=\"newPassword\">\r\n            <span class=\"error\" *ngIf=\"newPassword.touched && newPassword.hasError('required')\">New Password required</span>\r\n            <span class=\"error\" *ngIf=\"newPassword.touched && newPassword.hasError('minlength')\"> Enter minimum of 6 characters</span>\r\n        </div>\r\n        </div>\r\n        \r\n        <div class=\"form-group\">\r\n        <label class=\"col-sm-2 control-label\" for=\"form-field-2\">\r\n        Confirm Password </label>\r\n        <div class=\"col-sm-9\">\r\n            <input type=\"password\" placeholder=\"Confirm New Password\" id=\"confirmNewPassword\" class=\"form-control\" \r\n                formControlName=\"confirmNewPassword\" autocomplete=\"new-password\"\r\n            >\r\n            <span class=\"error\" *ngIf=\"confirmNewPassword.touched && confirmNewPassword.hasError('required')\">Confirm Password required</span>\r\n            <span class=\"error\" *ngIf=\"confirmNewPassword.touched && confirmNewPassword.hasError('minlength')\"> Enter minimum of 6 characters</span>\r\n            <span class=\"error\" *ngIf=\"confirmNewPassword.touched && updatePasswordForm.hasError('passwordNoMatch')\"> input doesn't match with new password</span>\r\n        </div>\r\n        </div>\r\n        \r\n        <br> <br>\r\n        \r\n        \r\n        \r\n        <div class=\"form-group\">\r\n        <label class=\"col-sm-2 control-label\" for=\"form-field-2\">\r\n        \r\n        </label>\r\n        <div class=\"col-sm-9\">\r\n        <button class=\"btn btn-primary btn-block\" type=\"submit\" [disabled]=\"updatePasswordForm.invalid || isLoading\">\r\n            <div class=\"loadingSpinner\" *ngIf=\"isLoading\"></div>\r\n            <span *ngIf=\"!isLoading\">Save</span>\r\n        </button>\r\n        </div>\r\n        </div>\r\n        </form>\r\n        </div>\r\n        </div>\r\n        \r\n        \r\n        \r\n        </div>\r\n        \r\n        \r\n        \r\n        \r\n        <!-- end: PAGE TITLE & BREADCRUMB -->\r\n    </div>\r\n</div>","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { UpdatePasswordComponent } from './update-password.component';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { ReactiveFormsModule } from '@angular/forms';\r\n\r\nconst routes: Routes = [\r\n  {path: '', component: UpdatePasswordComponent}\r\n];\r\n\r\n@NgModule({\r\n  declarations: [UpdatePasswordComponent],\r\n  imports: [\r\n    CommonModule,\r\n    RouterModule.forChild(routes),\r\n    ReactiveFormsModule\r\n  ]\r\n})\r\nexport class UpdatePasswordModule { }\r\n"],"sourceRoot":"webpack:///"}